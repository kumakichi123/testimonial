*** Begin Patch
*** Update File: src/lib/supabase-server.ts
@@
-import { cookies, headers } from "next/headers"
-import { createServerClient } from "@supabase/ssr"
-import type { SupabaseClient } from "@supabase/supabase-js"
-
-export function createServerSupabase(): SupabaseClient {
-  const cookieStore = cookies()
-  return createServerClient(
-    process.env.NEXT_PUBLIC_SUPABASE_URL!,
-    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
-    {
-      cookies: {
-        getAll: () =>
-          cookieStore.getAll().map((c) => ({ name: c.name, value: c.value })),
-        setAll: (cookiesToSet) => {
-          // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å´ã§ã¯ä½•ã‚‚ã—ãªãE€‚middleware ã§å®Ÿæ–½ã€E
-        }
-      },
-      global: {
-        headers: { "X-Forwarded-For": headers().get("x-forwarded-for") ?? "" }
-      }
-    }
-  )
-}
+import { cookies, headers } from "next/headers"
+import { createServerClient } from "@supabase/ssr"
+import type { SupabaseClient } from "@supabase/supabase-js"
+
+export function createServerSupabase(): SupabaseClient {
+  const cookieStore = cookies()
+
+  return createServerClient(
+    process.env.NEXT_PUBLIC_SUPABASE_URL!,
+    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
+    {
+      cookies: {
+        getAll: () => cookieStore.getAll(),
+        setAll: (cookiesToSet) => {
+          cookiesToSet.forEach(({ name, value, options }) => {
+            cookieStore.set(name, value, options)
+          })
+        },
+      },
+      global: {
+        headers: {
+          "X-Forwarded-For": headers().get("x-forwarded-for") ?? "",
+        },
+      },
+    }
+  )
+}
*** End Patch
